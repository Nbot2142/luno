<!DOCTYPE html>
<html>
<head>
    <title>Luno API</title>
</head>
<body>
    <script>
        const token = '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'; // Twój token dostępu
        const repoOwner = 'Nbot2142'; // Własność repozytorium
        const repoName = 'luno'; // Nazwa repozytorium
        const filePath = 'codes/games.json'; // Ścieżka do pliku JSON w repozytorium

        // Funkcja do generowania losowego kodu o danej długości
        function generateRandomCode(length) {
            const characters = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
            let result = '';
            const charactersLength = characters.length;
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }

        // Tworzenie nowej zawartości pliku JSON
        const newContent = {
            Game: 'Jailbreak',
            code: generateRandomCode(19) // 19 to długość kodu
        };

        // Zaktualizowanie zawartości pliku JSON w repozytorium
        fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`, {
            method: 'PUT',
            headers: {
                Authorization: `token ${token}`,
            },
            body: JSON.stringify({
                message: 'Aktualizacja pliku JSON',
                content: btoa(JSON.stringify(newContent)), // Zawartość pliku w formie base64
            }),
        })
        .then(response => {
            if (response.status === 200) {
                console.log('Plik JSON został zaktualizowany.');
            } else {
                console.error('Wystąpił błąd podczas aktualizacji pliku JSON.');
            }
        })
        .catch(error => {
            console.error('Błąd: ' + error);
        });
    </script>
</body>
</html>
